# AI 学习日记\n今天我学习了 MCP 协议，发现它真的非常强大，可以用来做解耦。
“很多人以为 Agent 就是调一下大模型 API，但真正的 Agent 核心在于带有边界条件的状态机引擎 (State Machine Engine)。
在 DeepContext 项目中，为了实现非结构化文本的读取与结构化入库，我手写了一个 ReAct (Reasoning and Acting) 循环调度器。

它通过解析模型返回的 tool_calls 标志位来判断状态流转。

我通过不断维护并向大模型压栈 Observation (工具执行结果)，驱动大模型进行多步推演。

为了保证系统的健壮性，我还在循环中引入了 MAX_TURNS 最大深度熔断机制。这在生产环境中至关重要，它能防止模型因为幻觉产生死循环，从而打爆服务器的并发连接和 API 计费。
这个循环让我的程序从‘一问一答的脚本’，变成了一个能够‘自主规划并执行多步动作的微型系统’。”